{
  "name": "42-jira-buddy",
  "displayName": "42-Jira-Buddy",
  "description": "Your friendly Jira companion for VS Code with GitHub Copilot support",
  "version": "0.1.0",
  "publisher": "your-publisher-name",
  "engines": {
    "vscode": "^1.85.0"
  },
  "categories": [
    "Other"
  ],
  "activationEvents": [
    "onStartupFinished",
    "onCommand:jira.configure",
    "onCommand:jira.authenticate",
    "onView:jiraMyWork"
  ],
  "main": "./out/extension.js",
  "contributes": {
    "commands": [
      {
        "command": "jira.configure",
        "title": "Jira: Configure"
      },
      {
        "command": "jira.authenticate",
        "title": "Jira: Authenticate"
      },
      {
        "command": "jira.clearCredentials",
        "title": "Jira: Clear Credentials"
      },
      {
        "command": "jira.validateConfig",
        "title": "Jira: Validate Configuration"
      },
      {
        "command": "jira.clearCache",
        "title": "Jira: Clear Cache"
      },
      {
        "command": "jira.cacheStats",
        "title": "Jira: View Cache Statistics"
      },
      {
        "command": "jira.refresh",
        "title": "Refresh",
        "icon": "$(refresh)"
      },
      {
        "command": "jira.openIssue",
        "title": "Open in Jira"
      },
      {
        "command": "jira.copyIssueKey",
        "title": "Copy Issue Key"
      },
      {
        "command": "jira.filterByIssueType",
        "title": "Filter by Issue Type",
        "icon": "$(filter)"
      },
      {
        "command": "jira.filterByPriority",
        "title": "Filter by Priority",
        "icon": "$(list-filter)"
      },
      {
        "command": "jira.filterBySprint",
        "title": "Filter by Sprint",
        "icon": "$(milestone)"
      },
      {
        "command": "jira.clearFilters",
        "title": "Clear Filters",
        "icon": "$(clear-all)"
      },
      {
        "command": "jira.searchIssues",
        "title": "Search Issues",
        "icon": "$(search)"
      },
      {
        "command": "jira.clearSearch",
        "title": "Clear Search",
        "icon": "$(close)"
      },
      {
        "command": "jira.changeStatus",
        "title": "Change Status"
      },
      {
        "command": "jira.addComment",
        "title": "Add Comment"
      },
      {
        "command": "jira.createBug",
        "title": "Jira: Create Bug Against Feature",
        "icon": "$(bug)"
      },
      {
        "command": "jira.createDefect",
        "title": "Jira: Create Internal Defect",
        "icon": "$(bug)"
      },
      {
        "command": "jira.createStory",
        "title": "Jira: Create Story",
        "icon": "$(book)"
      },
      {
        "command": "jira.createTask",
        "title": "Jira: Create Task",
        "icon": "$(checklist)"
      },
      {
        "command": "jira.showCreateMenu",
        "title": "Create Issue",
        "icon": "$(add)"
      },
      {
        "command": "jira.investigateWithCopilot",
        "title": "Investigate with Copilot",
        "icon": "$(copilot)"
      },
      {
        "command": "jira.investigateTicket",
        "title": "Jira: Investigate Ticket with Copilot",
        "icon": "$(copilot)"
      },
      {
        "command": "jira.toggleDummyData",
        "title": "Jira: Toggle Dummy Data Mode"
      }
    ],
    "configuration": {
      "title": "42-Jira-Buddy",
      "properties": {
        "jiraExtension.instanceUrl": {
          "type": "string",
          "default": "",
          "description": "Your Jira instance URL (e.g., https://company.atlassian.net)"
        },
        "jiraExtension.projectKey": {
          "type": "string",
          "default": "",
          "description": "Default project key for ticket creation"
        },
        "jiraExtension.featureEpics": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "default": [],
          "description": "List of feature epic IDs for bug creation"
        },
        "jiraExtension.autoRefreshInterval": {
          "type": "number",
          "default": 300,
          "description": "Auto-refresh interval in seconds (0 to disable)"
        },
        "jiraExtension.contextFileLocation": {
          "type": "string",
          "default": ".jira",
          "description": "Directory for Copilot context files"
        },
        "jiraExtension.contextFileCacheExpiry": {
          "type": "number",
          "default": 3600,
          "description": "Context file cache expiry time in seconds (default: 3600 = 1 hour)"
        },
        "jiraExtension.enableCopilotTools": {
          "type": "boolean",
          "default": true,
          "description": "Enable Copilot tools integration"
        },
        "jiraExtension.requireConfirmation": {
          "type": "object",
          "default": {
            "statusChange": true,
            "timeLogging": true,
            "createSubtask": false,
            "linkPR": false,
            "addComment": false
          },
          "properties": {
            "statusChange": {
              "type": "boolean",
              "description": "Require confirmation before changing issue status"
            },
            "timeLogging": {
              "type": "boolean",
              "description": "Require confirmation before logging time"
            },
            "createSubtask": {
              "type": "boolean",
              "description": "Require confirmation before creating subtasks"
            },
            "linkPR": {
              "type": "boolean",
              "description": "Require confirmation before linking pull requests"
            },
            "addComment": {
              "type": "boolean",
              "description": "Require confirmation before adding comments"
            }
          },
          "description": "Configure which Copilot tool operations require user confirmation"
        },
        "jiraExtension.maxIssues": {
          "type": "number",
          "default": 100,
          "description": "Maximum number of issues to fetch"
        },
        "jiraExtension.useDummyData": {
          "type": "boolean",
          "default": false,
          "description": "Use dummy data instead of connecting to Jira API (for testing UI without credentials)"
        }
      }
    },
    "viewsContainers": {
      "activitybar": [
        {
          "id": "jira",
          "title": "Jira",
          "icon": "resources/jira-icon.svg"
        }
      ]
    },
    "views": {
      "jira": [
        {
          "id": "jiraMyWork",
          "name": "My Work"
        }
      ]
    },
    "viewsWelcome": [
      {
        "view": "jiraMyWork",
        "contents": "No issues assigned to you.\n[Refresh](command:jira.refresh)\n[Configure Extension](command:jira.configure)"
      }
    ],
    "menus": {
      "view/title": [
        {
          "command": "jira.showCreateMenu",
          "when": "view == jiraMyWork",
          "group": "navigation@0"
        },
        {
          "command": "jira.refresh",
          "when": "view == jiraMyWork",
          "group": "navigation@1"
        },
        {
          "command": "jira.filterByIssueType",
          "when": "view == jiraMyWork",
          "group": "navigation"
        },
        {
          "command": "jira.filterByPriority",
          "when": "view == jiraMyWork",
          "group": "navigation"
        },
        {
          "command": "jira.filterBySprint",
          "when": "view == jiraMyWork",
          "group": "navigation"
        },
        {
          "command": "jira.clearFilters",
          "when": "view == jiraMyWork",
          "group": "navigation"
        },
        {
          "command": "jira.searchIssues",
          "when": "view == jiraMyWork",
          "group": "navigation"
        },
        {
          "command": "jira.clearSearch",
          "when": "view == jiraMyWork",
          "group": "navigation"
        }
      ],
      "view/item/context": [
        {
          "command": "jira.openIssue",
          "when": "view == jiraMyWork && viewItem == issue",
          "group": "navigation@1"
        },
        {
          "command": "jira.copyIssueKey",
          "when": "view == jiraMyWork && viewItem == issue",
          "group": "navigation@2"
        },
        {
          "command": "jira.investigateWithCopilot",
          "when": "view == jiraMyWork && viewItem == issue",
          "group": "copilot@1"
        },
        {
          "command": "jira.changeStatus",
          "when": "view == jiraMyWork && viewItem == issue",
          "group": "actions@1"
        },
        {
          "command": "jira.addComment",
          "when": "view == jiraMyWork && viewItem == issue",
          "group": "actions@2"
        }
      ]
    },
    "keybindings": [
      {
        "command": "jira.refresh",
        "key": "ctrl+shift+r",
        "mac": "cmd+shift+r",
        "when": "view == jiraMyWork"
      },
      {
        "command": "jira.openIssue",
        "key": "enter",
        "when": "view == jiraMyWork && viewItem == issue"
      },
      {
        "command": "jira.searchIssues",
        "key": "ctrl+shift+f",
        "mac": "cmd+shift+f",
        "when": "view == jiraMyWork"
      }
    ],
    "languageModelTools": [
      {
        "name": "jira_get_issue_info",
        "displayName": "Get Jira Issue Info",
        "modelDescription": "Retrieves detailed information about a specific Jira issue by its key (e.g., PROJ-123). Use this tool when you need to get the current status, description, assignee, priority, or other details about a Jira ticket. The issue key must be provided in the format PROJECT-NUMBER.",
        "userDescription": "Fetches information about a Jira issue",
        "canBeReferencedInPrompt": true,
        "toolReferenceName": "jira_issue",
        "inputSchema": {
          "type": "object",
          "properties": {
            "issueKey": {
              "type": "string",
              "description": "The Jira issue key (e.g., PROJ-123)"
            }
          },
          "required": ["issueKey"]
        }
      },
      {
        "name": "jira_add_comment",
        "displayName": "Add Comment to Jira Issue",
        "modelDescription": "Adds a comment to a Jira issue. Use this tool when you need to document progress, add context, or respond to discussion on a Jira ticket. The comment will be posted as the authenticated user.",
        "userDescription": "Adds a comment to a Jira issue",
        "canBeReferencedInPrompt": true,
        "toolReferenceName": "jira_comment",
        "inputSchema": {
          "type": "object",
          "properties": {
            "issueKey": {
              "type": "string",
              "description": "The Jira issue key (e.g., PROJ-123)"
            },
            "comment": {
              "type": "string",
              "description": "The comment text to add"
            }
          },
          "required": ["issueKey", "comment"]
        }
      },
      {
        "name": "jira_update_status",
        "displayName": "Update Jira Issue Status",
        "modelDescription": "Updates the status of a Jira issue by transitioning it to a new status (e.g., 'In Progress', 'Done', 'To Do'). Use this tool when you need to change the workflow state of an issue. The tool will find the appropriate transition based on the target status name. Requires user confirmation before execution.",
        "userDescription": "Updates the status of a Jira issue",
        "canBeReferencedInPrompt": true,
        "toolReferenceName": "jira_status",
        "inputSchema": {
          "type": "object",
          "properties": {
            "issueKey": {
              "type": "string",
              "description": "The Jira issue key (e.g., PROJ-123)"
            },
            "status": {
              "type": "string",
              "description": "The target status name (e.g., 'In Progress', 'Done', 'To Do')"
            }
          },
          "required": ["issueKey", "status"]
        }
      },
      {
        "name": "jira_link_pr",
        "displayName": "Link Pull Request to Jira Issue",
        "modelDescription": "Links a pull request to a Jira issue by adding a remote link. Use this tool when you need to associate a GitHub pull request with a Jira ticket for traceability. Provide the PR URL and the issue will show the link in its development panel.",
        "userDescription": "Links a pull request to a Jira issue",
        "canBeReferencedInPrompt": true,
        "toolReferenceName": "jira_pr",
        "inputSchema": {
          "type": "object",
          "properties": {
            "issueKey": {
              "type": "string",
              "description": "The Jira issue key (e.g., PROJ-123)"
            },
            "prUrl": {
              "type": "string",
              "description": "The full URL of the pull request (e.g., https://github.com/org/repo/pull/123)"
            },
            "prTitle": {
              "type": "string",
              "description": "Optional title for the pull request link"
            }
          },
          "required": ["issueKey", "prUrl"]
        }
      },
      {
        "name": "jira_create_subtask",
        "displayName": "Create Jira Subtask",
        "modelDescription": "Creates a new subtask under an existing Jira issue. Use this tool when you need to break down work into smaller tasks. The subtask will be created in the same project as the parent issue.",
        "userDescription": "Creates a subtask under a Jira issue",
        "canBeReferencedInPrompt": true,
        "toolReferenceName": "jira_subtask",
        "inputSchema": {
          "type": "object",
          "properties": {
            "parentIssueKey": {
              "type": "string",
              "description": "The parent issue key (e.g., PROJ-123)"
            },
            "summary": {
              "type": "string",
              "description": "The subtask summary/title"
            },
            "description": {
              "type": "string",
              "description": "Optional description for the subtask"
            }
          },
          "required": ["parentIssueKey", "summary"]
        }
      },
      {
        "name": "jira_log_time",
        "displayName": "Log Time to Jira Issue",
        "modelDescription": "Logs work time to a Jira issue. Use this tool when you need to record time spent on a ticket. Supports formats like '2h', '30m', '2h 30m', '1d' (8 hours), '1w' (40 hours). Optionally include a work description. Requires user confirmation before execution.",
        "userDescription": "Logs work time to a Jira issue",
        "canBeReferencedInPrompt": true,
        "toolReferenceName": "jira_time",
        "inputSchema": {
          "type": "object",
          "properties": {
            "issueKey": {
              "type": "string",
              "description": "The Jira issue key (e.g., PROJ-123)"
            },
            "timeSpent": {
              "type": "string",
              "description": "Time spent in Jira format (e.g., '2h', '30m', '2h 30m', '1d', '1w')"
            },
            "description": {
              "type": "string",
              "description": "Optional description of the work performed"
            }
          },
          "required": ["issueKey", "timeSpent"]
        }
      }
    ]
  },
  "scripts": {
    "vscode:prepublish": "npm run package",
    "compile": "tsc -p ./",
    "watch": "tsc -watch -p ./",
    "package": "webpack --mode production",
    "webpack": "webpack --mode development",
    "webpack-watch": "webpack --mode development --watch",
    "pretest": "npm run compile && npm run lint",
    "lint": "eslint src --ext ts",
    "test": "node ./out/test/runTest.js"
  },
  "dependencies": {
    "axios": "^1.6.0"
  },
  "devDependencies": {
    "@types/mocha": "^10.0.6",
    "@types/node": "^20.10.0",
    "@types/vscode": "^1.85.0",
    "@typescript-eslint/eslint-plugin": "^6.13.0",
    "@typescript-eslint/parser": "^6.13.0",
    "@vscode/test-electron": "^2.3.8",
    "eslint": "^8.55.0",
    "mocha": "^10.2.0",
    "prettier": "^3.1.0",
    "terser-webpack-plugin": "^5.3.14",
    "ts-loader": "^9.5.4",
    "typescript": "^5.3.3",
    "webpack": "^5.102.1",
    "webpack-cli": "^6.0.1"
  }
}
